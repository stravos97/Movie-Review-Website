{% extends 'base.html.twig' %}

{% block title %}My Reviews{% endblock %}

{% block body %}
  <div class="container mt-4">
    <h2>My Reviews</h2>
    {% if items is empty %}
      <div class="alert alert-info">You haven't posted any reviews yet.</div>
    {% else %}
      <div class="list-group">
        {% for r in items %}
          <a href="{{ path('article_show', { id: r.id }) }}" class="list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1">{{ r.movieTitle }}</h5>
              <small>Rating: {{ r.rating ?? 'n/a' }}</small>
            </div>
            <p class="mb-1">{{ r.summary|length > 200 ? r.summary|slice(0, 200) ~ 'â€¦' : r.summary }}</p>
            <small>Updated: {{ r.updatedAt ? r.updatedAt|date('Y-m-d H:i') : (r.date ? r.date|date('Y-m-d H:i') : '') }}</small>
          </a>
        {% endfor %}
      </div>
    {% endif %}

    <nav aria-label="Pagination" class="mt-3">
      <ul class="pagination">
        <li class="page-item{% if page <= 1 %} disabled{% endif %}">
          <a class="page-link" href="{{ path('my_reviews', { page: page - 1 }) }}" tabindex="-1">Previous</a>
        </li>
        <li class="page-item active"><span class="page-link">Page {{ page }}</span></li>
        <li class="page-item{% if not has_next %} disabled{% endif %}">
          <a class="page-link" href="{{ path('my_reviews', { page: page + 1 }) }}">Next</a>
        </li>
      </ul>
    </nav>
  </div>
{% endblock %}
